@{
    ViewBag.Title = "OnSale";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="~/Scripts/jquery-1.9.1.min.js"></script>

@*////////////////////////////////////////////////////////////////////////*@
<style>
    /*RWD*/
    @@media only screen and (max-width:768px) {
        .mobile {
            position: absolute;
            top: 40%;
        }
        /*TitleRWD*/
        .onsalenow {
            position: absolute;
            left: 33%;
            right: 33%;
            animation:move-to-centerMini 2s ease forwards;
        }
        @@keyframes move-to-centerMini{
            0%{transform:translateY(0%);opacity:0}
            100%{transform:translateY(10%)}
        }
    }
    /*carousel-indicatorsRWD*/
    @@media only screen and (max-width:678px) {
        .carousel-indicators{
            bottom:-15% !important;
        }
    }
    /*TitleAnimation*/
    @@media only screen and (min-width:678px) {
        .onsalenow {
            animation: move-to-left 2s linear forwards;
        }

        @@keyframes move-to-left {
            0% {transform: translate(20%);opacity:0}
            100% {transform: translate(0%)}
        }
    }
    /*carouselAnimation*/
    .mobile {
        animation: move-to-center 1s ease forwards;
    }
    @@keyframes move-to-center {
        0% {
            transform: translateY(30%);
            opacity: 0
        }
        100% {
            transform: translateY(0%)
        }
    }
    /*carouselProgressbar*/
    .carouselProgress {
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        height: 20px;
        background-color: orange
    }
</style>
<div style="margin-top:40px" class="row">
    <h1 class="onsalenow"><strong>おすすめ</strong></h1>
    <div class="mobile">
        @*Carousel*@
        <div id="menuCarousel" class="carousel slide" data-interval="2000" data-pause="false" data-ride="carousel">
            <div class="carousel-inner" style="height:60% !important">
                <div class="item active">
                    <a href="@Url.Action("Index","Home")">
                        <img src="~/ProductImages/OnSale/OnSale01.png" />
                        <div class="carousel-caption"></div>
                    </a>
                </div>
                <div class="item">
                    <a href="@Url.Action("Index","Home")">
                        <img src="~/ProductImages/OnSale/OnSale02.png" />
                        <div class="carousel-caption"></div>
                    </a>
                </div>
                <div class="item">
                    <a href="@Url.Action("Index","Home")">
                        <img src="~/ProductImages/OnSale/OnSale03.png" />
                        <div class="carousel-caption"></div>
                    </a>
                </div>
                <div class="item">
                    <a href="@Url.Action("Index","Home")">
                        <img src="~/ProductImages/OnSale/OnSale04.png" />
                        <div class="carousel-caption"></div>
                    </a>
                </div>
            </div>
            <a class="left carousel-control" href="#menuCarousel" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#menuCarousel" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
            <ol class="carousel-indicators" style="bottom:-10%" id="CarouselIndicators">
                <li data-target="#menuCarousel" data-slide-to="0" class="active" aria-label="Slide1">
                </li>
                <li data-target="#menuCarousel" data-slide-to="1" aria-label="Slide2">
                </li>
                <li data-target="#menuCarousel" data-slide-to="2" aria-label="Slide3">
                </li>
                <li data-target="#menuCarousel" data-slide-to="3" aria-label="Slide4">
                </li>
            </ol>
        </div>
    </div>
</div>
@*CarouselProgressBar*@
<div class="carouselProgress"></div>
<script>
    /*CarouselProgressAnimation*/
    function runProgressbar() {
        //$('.carousel').carousel({
        //    interval: 2000,
        //});
        var counter = 0;
        var progressbar;
        progressbar = setInterval(function () {
            counter = (counter + 1) % 100;
            $(".carouselProgress").css("width", counter + "%");
        }, 20);

        $(".carousel").on("click", function () {
            counter = 0;
            clearInterval(progressbar);
            runProgressbar();
        });
    };
    runProgressbar();
</script>
